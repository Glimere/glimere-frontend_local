import{a as A,r as t,j as a}from"./index-9b95996f.js";import{F as D,S as E}from"./SearchList-728401a5.js";import{u as L}from"./useFetch-e6405f81.js";import"./extends-4c19d496.js";import"./iconBase-eb279709.js";import"./globalPrice-b433b0ed.js";import"./index.esm-cb6676d1.js";import"./index.esm-e9adbea5.js";import"./index.esm-b8ae64af.js";import"./index.esm-118be842.js";import"./useDispatch-1114ea94.js";function U(){const n=A(),[f,$]=t.useState(n.state);t.useState(!1),t.useState([]);const[s,r]=t.useState([]),[o,d]=t.useState(""),[u,j]=t.useState([0,1e5]),[v,m]=t.useState(u[0]),[C,x]=t.useState(u[1]),[i,c]=t.useState([]);t.useState(!1);const[F,P]=t.useState("desc");t.useEffect(()=>{$(n.state||{})},[n.state]);const{data:B,loading:b,error:M}=L(`/api/apparels?populate=*&[filters][subcategories][id][$eq]=${f.id}${s.map(e=>`&[filters][brands][id][$eq]=${e}`)}&[filters][price][$lte]=${C}&[filters][price][$gte]=${v}${i.map(e=>`&[filters][sizes][id][$eq]=${e}`)}&filters[discount][$gte]=${o}&sort=price:${F}`),w=e=>{i.includes(e)?c(i.filter(l=>l!==e)):c([...i,e]),console.log(i)},z=e=>{d(e)},N=(e,l)=>{j(l),m(l[0]),x(l[1])},q=e=>{s.includes(e)?r(s.filter(l=>l!==e)):r([...s,e]),console.log("selectedBrands",s)},h=(e,l)=>{e==="category"?r(""):e==="sizes"?c([]):e==="discount"?d(""):e==="minPrice"?m(0):e==="maxPrice"&&x(0)},S=()=>{r([]),c([]),d("")},p=()=>!!(s.length>0||i.length>0||o);console.log("isFilterApplied",p());const g=[{type:"brand",value:s},{type:"sizes",value:i},{type:"discount",value:o}];return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"w-full bg-white-100 pt-[100px] px-[15px] sm:px-[55px]",children:[a.jsx("div",{className:"w-full flex-row",children:a.jsx("h1",{className:"text-[30px] text-dark-100 font-bold",children:f.attributes.title})}),a.jsxs("div",{className:"w-full flex gap-0 sm:gap-[20px] mt-[20px]",children:[a.jsx(D,{handleSizeChange:w,handleDiscountChange:z,handlePriceChange:N,handleBrandChange:q,handleFilterChange:h,handleClearAllFilters:S,isFilterApplied:p,filters:g,value:u,selectedBrands:s,selectedDiscount:o,selectedSizes:i}),a.jsx(E,{loading:b,filters:g,searchResults:B,handleFilterChange:h,isFilterApplied:p,handleClearAllFilters:S,setSort:P})]})]})})}export{U as default};
