import{j as s,b as u,c as b,d as h,L as v,f as m,h as j,r as o,s as $,P as w}from"./index-9b95996f.js";import{a as y,b as N}from"./index.esm-b8ae64af.js";import{a as f}from"./index.esm-118be842.js";import{g}from"./globalPrice-b433b0ed.js";import{u as A}from"./useDispatch-1114ea94.js";const C=({ratings:t,loading:l})=>{if(!t||t.length===0)return s.jsx("div",{className:`flex flex-row ${l?"invisible":"visible"} duration-150`,children:Array.from({length:5},(i,e)=>s.jsx(f,{color:e<0?"#ed7534":"#C4C4C4"},e))});const n=t.reduce((i,e)=>i+e,0)/t.length,r=Math.round(n*100)/100;return s.jsx("div",{className:`flex flex-row ${l?"invisible":"visible"} duration-150`,children:Array.from({length:5},(i,e)=>s.jsx(f,{color:e<r?"#ed7534":"#C4C4C4"},e))})},D=t=>{var i;const l=A();u(b);const d=u(h);function n(e){return!e||!Array.isArray(e)?[]:e.map(x=>x.attributes.rating).flat()}const r=e=>d.some(a=>a.id===e);return s.jsx(s.Fragment,{children:(i=t==null?void 0:t.apparel)==null?void 0:i.map(e=>s.jsxs("div",{className:` ${t.viewToggle?"w-full h-[180px]":"w-full h-[295px]"}  relative duration-150 ${t.loading?"bg-gray-100 animate-pulse":""}   rounded-[10px] overflow-hidden`,children:[s.jsx(v,{to:`/view-product/${e.id}`,state:e,children:s.jsxs("div",{className:`h-full w-full p-[15px] border-[1px] border-solid border-gray-200 rounded-[10px] flex ${t.viewToggle?"flex-row gap-[18px]":"flex-col"}  items-center justify-center`,children:[s.jsx("div",{className:`w-full h-full rounded-[5px] ${t.viewToggle?"flex-[1]":"flex-[3]"} duration-150 bg-cover bg-center bg-no-repeat z-[2] relative ${t.loading?"invisible":"visible"} `,style:{backgroundImage:`url(${m.url}${e.attributes.apparel_imgs.data[0].attributes.url})`},alt:e.attributes.apparel_name}),s.jsxs("div",{className:`w-full ${t.viewToggle?"flex-[3]":"flex-[1]"} flex flex-col py-[19px] duration-150 ${t.loading?"bg-gray-50 animate-pulse":"bg-white-100"}  z-[2] relative`,children:[s.jsx("p",{className:`font-bold text-[10px] ${t.loading?"invisible":"visible"} duration-150`,children:e.attributes.brands.data[0].attributes.name}),s.jsx("div",{className:`text-[12px] mb-[5px] ${t.loading?"invisible":"visible"} duration-150`,children:e.attributes.apparel_name}),s.jsxs("div",{className:`flex flex-row justify-between rounded-[5px] ${t.loading?"bg-gray-300 animate-pulse":""} duration-150`,children:[s.jsxs("div",{className:"h-full ",children:[s.jsxs("div",{className:"flex flex-row gap-[10px]",children:[s.jsx("span",{className:`${e.attributes.is_discounted==!0?"text-gray-300 line-through":""} text-[0.8rem] sm:text-[12px] text-sm mb-[5px] ${t.loading?"invisible":"visible"} duration-150`,children:g(e.attributes.apparel_price)}),s.jsx("span",{className:`text-gray-600 line-through ${e.attributes.is_discounted===!1?"hidden":""} text-[0.8rem] sm:text-[12px] text-sm mb-[5px] ${t.loading?"invisible":"visible"} duration-150`,children:g(e.attributes.discounted_price)})]}),s.jsx(C,{ratings:n(e.attributes.ratings.data),loading:t.loading})]}),s.jsx("div",{className:"h-full flex items-center"})]})]})]})}),s.jsx("div",{className:`h-[30px] w-[30px] rounded-full bg-[#ffffff] absolute top-[9%] right-[9%] flex justify-center items-center cursor-pointer z-10 ${t.loading?"invisible":"visible"} duration-150`,onClick:()=>l(j(e)),children:r(e.id)?s.jsx(y,{className:"text-[20px] text-[#ED7534]"}):s.jsx(N,{className:"text-[20px] text-[#ED7534]"})})]},e.id))})},_=t=>{const[l,d]=o.useState([]),[n,r]=o.useState(!1),[i,e]=o.useState(null),a=u($);return o.useEffect(()=>{(async()=>{try{r(!0);const c=await w.get(`${m.url}${t}`,{headers:{Authorization:`Bearer ${a==null?void 0:a.jwt}`}});d(c.data.data||[])}catch(c){e(c)}r(!1)})()},[t,a.jwt]),{data:l,loading:n,error:i}},L=_;export{C as A,D as P,L as u};
